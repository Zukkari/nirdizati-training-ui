<?xml version="1.0" encoding="UTF-8" ?>

<configuration>

    <!-- Thread pool configuration -->
    <threadpool>
        <!-- Core threadpool size -->
        <core>10</core>
        <!-- Maximum threadpool size -->
        <max>20</max>
        <!-- How long thread should be kept alive after being idle -->
        <keepAlive>10</keepAlive>
        <!-- Queue capacity -->
        <capacity>1024</capacity>
    </threadpool>

    <userPreferences>
        <!-- Whether the simulation process should be run under specific user (root by default) -->
        <enabled>false</enabled>
        <userName>stanislav</userName>
        <userGroup>stanislav</userGroup>
        <sudo></sudo>
        <acp>0660</acp>
        <authorized>VjNyWUg0ckRQNFNzVzByRA==</authorized>
        <requirePassword>false</requirePassword>
    </userPreferences>

    <!-- Configuration for default values in TrainingController-->
    <defaultConfig>
        <minValue>0.1</minValue>
        <average>-1</average>
    </defaultConfig>

    <!-- Page configuration used for redirects -->
    <pageConfig>
        <page>
            <id>landing</id>
            <uri>/views/landing.zul</uri>
        </page>
        <page>
            <id>upload</id>
            <uri>/views/upload_page.zul</uri>
        </page>
        <page>
            <id>training</id>
            <uri>/views/training.zul</uri>
        </page>
        <page>
            <id>validation</id>
            <uri>/views/job_info.zul</uri>
        </page>
        <page>
            <id>admin</id>
            <uri>/views/admin.zul</uri>
        </page>
        <page>
            <id>jobOverview</id>
            <uri>/views/job_overview.zul</uri>
        </page>
    </pageConfig>

    <dirs>
        <dir><!-- Path to python executable -->
            <id>python</id>
            <path>/usr/bin/python3</path>
        </dir>
        <dir>
            <!-- Directory for user log storage -->
            <id>userLogDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/logdata/</path>
        </dir>
        <dir>
            <!-- Directory for user model storage -->
            <id>userModelDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/usermodels/</path>
        </dir>
        <dir>
            <!-- Directory where to look for prediction scripts -->
            <id>scriptDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/</path>
        </dir>
        <dir>
            <id>coreDir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/core/</path>
        </dir>
        <dir>
            <!-- Directory for training parameters -->
            <id>trainDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/core/training_params/</path>
        </dir>
        <dir><!-- Directory for data set parameters -->
            <id>datasetDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/core/dataset_params/</path>
        </dir>
        <dir>
            <!-- Results where trained models are located -->
            <id>pklDirectory</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/pkl/</path>
        </dir>
        <dir>
            <!-- Optimized hyperparameter directory location -->
            <id>ohpdir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/core/optimal_params/</path>
        </dir>
        <dir>
            <!-- Detailed log result information path-->
            <id>detailedDir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/results/detailed/</path>
        </dir>
        <dir>
            <!-- Feature importance dir location -->
            <id>featureDir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/results/feature_importance/</path>
        </dir>
        <dir>
            <!-- Validation directory relative to script dir -->
            <id>validationDir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/PredictiveMethods/results/validation/</path>
        </dir>
        <dir>
            <!-- temporary directory for user log storage -->
            <id>tmpDir</id>
            <path>/home/stanislav/git/nirdizati-training-ui/tmp/</path>
        </dir>
        <dir>
            <!-- Log file directory, where to read from on admin page -->
            <id>logFile</id>
            <path>/home/stanislav/apache-tomcat-8.5.24/logs/catalina.out</path>
        </dir>
    </dirs>

    <!-- Header button configuration for header construction -->
    <headerConfiguration>
        <headerItems>
            <headerItem>
                <label>header.upload</label>
                <redirect>upload</redirect>
                <enabled>true</enabled>
                <position>0</position>
                <icon>z-icon-cloud-upload</icon>
            </headerItem>
            <headerItem>
                <label>header.training</label>
                <redirect>training</redirect>
                <enabled>true</enabled>
                <position>1</position>
                <icon>z-icon-gears</icon>
            </headerItem>
            <headerItem>
                <label>header.validation</label>
                <redirect>jobOverview</redirect>
                <enabled>true</enabled>
                <position>2</position>
                <icon>z-icon-line-chart</icon>
            </headerItem>
            <headerItem>
                <label>header.admin</label>
                <redirect>admin</redirect>
                <enabled>true</enabled>
                <position>3</position>
                <icon>z-icon-bug</icon>
            </headerItem>
        </headerItems>
    </headerConfiguration>

    <csvConfig>
        <!-- Columns that need to be specified by user when creating model -->
        <userCols>
            <col>case_id_col</col>
            <col>activity_col</col>
            <col>timestamp_col</col>
            <col>resource_col</col>
        </userCols>

        <!-- Values that will be used to search for case id column -->
        <caseId>
            <id>caseid</id>
            <id>case_id</id>
            <id>case id</id>
        </caseId>

        <!-- Values that will be used to search for activity column -->
        <activityId>
            <id>activity</id>
            <id>activity_name</id>
            <id>activity_id</id>
            <id>event_name</id>
        </activityId>

        <!-- Values that will be used to search for resource column -->
        <resourceId>
            <id>resource</id>
        </resourceId>

        <!-- Values that will be used for timestamp column identification -->
        <timestampFormat>
            <format>\d{4}[-/]\d{1,2}[-/]\d{1,2}[ T]\d{1,2}:\d{1,2}:\d{1,2}</format>
            <format>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}</format>
            <format>yyyy-mm-dd'T'hh:mm:ss</format>
        </timestampFormat>

        <!-- Regexp that is used for csv file splitting -->
        <splitter>[,;]</splitter>

        <!-- Values that are used to clean columns for categori<ation -->
        <emptyValues>
            <id/>
            <id>EMPTY</id>
            <id>empty</id>
        </emptyValues>

        <!-- Threshold that decides whether value is categorical or numerical -->
        <threshold>20</threshold>

        <!-- Sample size, how many cases should be used for categorization -->
        <sampleSize>100</sampleSize>

        <!-- extensions allowed for file upload -->
        <extensions>
            <ext>xes</ext>
            <ext>csv</ext>
        </extensions>
    </csvConfig>

    <!-- Model training configurations -->
    <modelConfig>
        <!-- Types that can be used for model construction -->
        <types>
            <type>encoding</type>
            <type>bucketing</type>
            <type>learner</type>
            <type>predictiontype</type>
        </types>

        <basicParams>
            <param>zero</param>
            <param>agg</param>
            <param>xgb</param>
        </basicParams>

        <!-- Model parameters that are represented in the menu -->
        <modelparams>
            <modelparam>
                <id>last_state</id>
                <parameter>laststate</parameter>
                <type>encoding</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>frequency</id>
                <parameter>agg</parameter>
                <type>encoding</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>combined</id>
                <parameter>combined</parameter>
                <type>encoding</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>index_based</id>
                <parameter>index</parameter>
                <type>encoding</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>zero</id>
                <parameter>zero</parameter>
                <type>bucketing</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>state_based</id>
                <parameter>state</parameter>
                <type>bucketing</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>clustering</id>
                <parameter>cluster</parameter>
                <type>bucketing</type>
                <enabled>true</enabled>
                <properties>
                    <property id="n_clusters" type="org.zkoss.zul.Intbox" maxValue="10" minValue="1">1</property>
                </properties>
            </modelparam>
            <modelparam>
                <id>prefix_length_based</id>
                <parameter>prefix</parameter>
                <type>bucketing</type>
                <enabled>true</enabled>
            </modelparam>

            <modelparam>
                <id>random_forest</id>
                <parameter>rf</parameter>
                <type>learner</type>
                <enabled>true</enabled>
                <properties>
                    <property id="n_estimators" type="org.zkoss.zul.Intbox" maxValue="400" minValue="1">300</property>
                    <property id="max_features" type="org.zkoss.zul.Doublebox" minValue="0.01">0.5</property>
                </properties>
            </modelparam>
            <modelparam>
                <id>gradient_boosting</id>
                <parameter>gbm</parameter>
                <type>learner</type>
                <enabled>true</enabled>
                <properties>
                    <property id="n_estimators" type="org.zkoss.zul.Intbox" maxValue="400" minValue="1">300</property>
                    <property id="max_features" type="org.zkoss.zul.Doublebox" minValue="0.01">0.5</property>
                    <property id="learning_rate" type="org.zkoss.zul.Doublebox" minValue="0.01">0.1</property>
                </properties>
            </modelparam>
            <modelparam>
                <id>decision_tree</id>
                <parameter>dt</parameter>
                <type>learner</type>
                <enabled>true</enabled>
                <properties>
                    <property id="n_estimators" type="org.zkoss.zul.Intbox" maxValue="400" minValue="1">300</property>
                    <property id="max_depth" type="org.zkoss.zul.Doublebox" minValue="1">5</property>
                </properties>
            </modelparam>
            <modelparam>
                <id>xgboost</id>
                <parameter>xgb</parameter>
                <type>learner</type>
                <enabled>true</enabled>
                <properties>
                    <property id="n_estimators" type="org.zkoss.zul.Intbox" maxValue="400" minValue="1">300</property>
                    <property id="learning_rate" type="org.zkoss.zul.Doublebox" minValue="0.01">0.03</property>
                    <property id="subsample" type="org.zkoss.zul.Doublebox" minValue="0.1">0.7</property>
                    <property id="colsample_bytree" type="org.zkoss.zul.Doublebox" minValue="0.1">0.7</property>
                    <property id="max_depth" type="org.zkoss.zul.Intbox" minValue="1">5</property>
                </properties>
            </modelparam>

            <modelparam>
                <id>remaining_time</id>
                <parameter>remtime</parameter>
                <type>predictiontype</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>next_activity</id>
                <parameter>next</parameter>
                <type>predictiontype</type>
                <enabled>true</enabled>
            </modelparam>
            <modelparam>
                <id>outcome</id>
                <parameter>-1</parameter>
                <type>predictiontype</type>
                <enabled>true</enabled>
            </modelparam>
        </modelparams>
    </modelConfig>

    <tooltips>
        <tooltip>
            <id>encoding</id>
            <enableHtml>true</enableHtml>
            <label>
                PGI+RW5jb2Rpbmc8L2I+IC0gdGhpcyBpcyBob3cgeW91IHdhbnQgdG8gZW5jb2RlIHRyYWNlcyBmcm9tIHRoZSBzYW1lIGJ1Y2tldCBpbnRvIGZpeGVkLXNpemUgZmVhdHVyZSB2ZWN0b3Jz
            </label>
        </tooltip>
        <tooltip>
            <id>last_state</id>
            <enableHtml>false</enableHtml>
            <label>
                TGFzdCBzdGF0ZSAtIGNvbmNhdGVuYXRlIGNhc2UgYXR0cmlidXRlcyArIGF0dHJpYnV0ZXMgb2YgdGhlIGxhdGVzdCBleGVjdXRlZCBldmVudA==
            </label>
        </tooltip>
        <tooltip>
            <id>frequency</id>
            <enableHtml>false</enableHtml>
            <label>
                RnJlcXVlbmN5IC0gY29uY2F0ZW5hdGUgY2FzZSBhdHRyaWJ1dGVzICsgY291bnRzIG9mIGNhdGVnb3JpY2FsIGF0dHJpYnV0ZXMgKGFjdGl2aXRpZXMsIHJlc291cmNlcywgZXRjLikgKyBtaW4vYXZlcmFnZS9tYXgvc3VtIG9mIG51bWVyaWNhbCBhdHRyaWJ1dGVzIChjb3N0LCB0aW1lIHNpbmNlIGNhc2Ugc3RhcnQsIGV0Yy4p
            </label>
        </tooltip>
        <tooltip>
            <id>combined</id>
            <enableHtml>false</enableHtml>
            <label>Q29tYmluZWQgLSBsYXN0IHN0YXRlICsgZnJlcXVlbmN5</label>
        </tooltip>
        <tooltip>
            <id>index_based</id>
            <enableHtml>true</enableHtml>
            <label>
                SW5kZXgtYmFzZWQgLSBjb25jYXRlbmF0ZSBjYXNlIGF0dHJpYnV0ZXMgKyBhdHRyaWJ1dGVzIG9mIDxiPmVhY2g8L2I+IGV4ZWN1dGVkIGV2ZW50LiBUaGUgPGI+b25seTwvYj4gZW5jb2RpbmcgdGhhdCBpcyBsb3NzbGVzcy4gSXQgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHByZWZpeC1sZW5ndGggYnVja2V0aW5n
            </label>
        </tooltip>
        <tooltip>
            <id>bucketing</id>
            <enableHtml>true</enableHtml>
            <label>
                PGI+QnVja2V0aW5nPC9iPiAtIHRoaXMgaXMgaG93IHlvdSB3YW50IHRvIGdyb3VwIHByb2Nlc3MgdHJhY2VzIGludG8gYnVja2V0cy4gQSBzZXBhcmF0ZSBwcmVkaWN0b3Igd2lsbCBiZSB0cmFpbmVkIGZvciBlYWNoIGJ1Y2tldC4=
            </label>
        </tooltip>
        <tooltip>
            <id>zero</id>
            <enableHtml>false</enableHtml>
            <label>
                WmVybyAtIGRpc2NhcmQgZ3JvdXBpbmcsIHRyYWluIGEgc2luZ2xlIHByZWRpY3RvciB1c2luZyBhbGwgYXZhaWxhYmxlIHByb2Nlc3MgdHJhY2VzLg==
            </label>
        </tooltip>
        <tooltip>
            <id>state_based</id>
            <enableHtml>false</enableHtml>
            <label>
                U3RhdGUgYmFzZWQgLSBncm91cCB0cmFjZXMgYWNjb3JkaW5nIHRvIHRoZSBzdGF0ZSAoZGVjaXNpb24gcG9pbnQpIHRoZXkgaGF2ZSByZWFjaGVkIHNvIGZhciwgb25lIHByZWRpY3RvciBmb3IgZWFjaCBzdGF0ZS4gTm90ZSB0cmFpbmluZyB3aWxsIHRha2UgbG9uZ2VyIGZvciBwcm9jZXNzZXMgd2l0aCBjb21wbGljYXRlZCBwcm9jZXNzIG1vZGVscy4=
            </label>
        </tooltip>
        <tooltip>
            <id>clustering</id>
            <enableHtml>false</enableHtml>
            <label>
                Q2x1c3RlcmluZyAtIGdyb3VwIHNpbWlsYXIgdHJhY2VzIHVzaW5nIGstbWVhbnMgY2x1c3RlcmluZywgb25lIHByZWRpY3RvciBmb3IgZWFjaCBjbHVzdGVyLg==
            </label>
        </tooltip>
        <tooltip>
            <id>prefix_length_based</id>
            <enableHtml>true</enableHtml>
            <label>
                UHJlZml4IGxlbmd0aCBiYXNlZCAtIGdyb3VwIHRyYWNlcyBhY2NvcmRpbmcgdG8gdGhlaXIgbGVuZ3RoLiBUaGUgPGk+bjwvaT4tdGggYnVja2V0IHdpbGwgY29uc2lzdCBvZiB0cmFjZXMgdGhhdCBhcmUgYXQgbGVhc3QgPGk+bjwvaT4gZXZlbnRzIGxvbmcu
            </label>
        </tooltip>
        <tooltip>
            <id>learner</id>
            <enableHtml>true</enableHtml>
            <label>
                PGI+UHJlZGljdGlvbiBtZXRob2Q8L2I+IC0gdGhpcyBpcyB0aGUgbWFjaGluZSBsZWFybmluZyBhbGdvcml0aG0gdGhhdCBpcyB1c2VkIHRvIGZpdCBhIHByZWRpY3RpdmUgbW9kZWwu
            </label>
        </tooltip>
        <tooltip>
            <id>random_forest</id>
            <enableHtml>true</enableHtml>
            <label>PGEgaHJlZj0iaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFuZG9tX2ZvcmVzdCI+UmFuZG9tIGZvcmVzdDwvYT4=
            </label>
        </tooltip>
        <tooltip>
            <id>gradient_boosting</id>
            <enableHtml>true</enableHtml>
            <label>
                PGEgaHJlZj0iaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR3JhZGllbnRfYm9vc3RpbmciPkdyYWRpZW50IGJvb3N0aW5nPC9hPg==
            </label>
        </tooltip>
        <tooltip>
            <id>decision_tree</id>
            <enableHtml>true</enableHtml>
            <label>
                PGEgaHJlZj0iaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVjaXNpb25fdHJlZSI+RGVjaXNpb24gdHJlZTwvYT4=
            </label>
        </tooltip>
        <tooltip>
            <id>xgboost</id>
            <enableHtml>true</enableHtml>
            <label>PGEgaHJlZj0iaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvWGdib29zdCI+WEdCb29zdDwvYT4=</label>
        </tooltip>
    </tooltips>
</configuration>